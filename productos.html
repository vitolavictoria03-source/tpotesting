<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Tienda de Barritas de Cereal</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">
  <link rel="stylesheet" href="estilo2.css">

</head>
<body>
  <!-- Franja superior con logo -->
    <header class="hero">
      <img src="logobanner.png" alt="Logo EneBar" class="logo">
    </header>
<header>
  <div class="wrap topbar">
    <input id="q" class="search" placeholder="Buscar barritas por nombre o sabor…">
    <select id="sort">
      <option value="price-asc">Precio: menor a mayor</option>
      <option value="price-desc">Precio: mayor a menor</option>
      <option value="protein-desc">Proteína: más a menos</option>
      <option value="protein-asc">Proteína: menos a más</option>
    </select>
  </div>
</header>

<main class="wrap grid">
  <!-- Lado filtros -->
  <aside class="panel filters">
    <h3>Filtros</h3>
    <div class="row">
      <div>
        <!--Filtro proteina -->
        <label><strong>Cantidad de proteína:</strong> (por barra)</label>
        <select id="protein">
          <option value="">Todas</option>
          <option value="20+">20g o más</option>
          <option value="10-19">10–19g</option>
          <option value="<10">Menos de 10g</option>
        </select>
      </div>

      <div>
         <!--Filtro precio -->
        <label><strong>Precio</strong></label>
        <div class="price-range">
          <input id="min" type="number" placeholder="Mín.">
          <input id="max" type="number" placeholder="Máx.">
        </div>
      </div>

       <!--Check box si es apto vegan o apto sin tacc -->
      <div class="check"><input id="vegan" type="checkbox"><label for="vegan">Vegano</label></div>
      <div class="check"><input id="gf" type="checkbox"><label for="gf">Apto celíacos (Sin TACC)</label></div>

      <button id="clear" class="btn">Limpiar filtros</button>

      <div class="chips" id="active-chips"></div>
    </div>
  </aside>

  <!-- Lado catálogo -->
  <section>
    <div class="toolbar">
      <div id="count"></div>
    </div>
    <div id="catalog" class="catalog"></div>
    <div id="empty" class="empty" style="display:none">No se encontraron resultados con los filtros aplicados.</div>
  </section>
   <footer class="site-footer">
      <div class="footer-wrap">
        <p class="footer-eyebrow">CONOCE MÁS SOBRE</p>
        <!-- Pegar foto del logo -->
        <img src="logofooter.png" alt="Logo EneBar" class="footer-logo">

        <ul class="footer-links">
          <li><a href="#">¿Quienes somos?</a></li>
          <li><a href="#">¿Dónde encontrarnos?</a></li>
          <li><a href="productos.html">Nuestras Barritas</a></li>
          <li><a href="#">Contactanos</a></li>
          <li><a href="#">Nuestras Redes</a></li>
        </ul>

        <div class="footer-icons">
          <a href="https://instagram.com" aria-label="Instagram" target="_blank" rel="noopener">
            <i class="bi bi-instagram" style="font-size:1.3rem;"></i>
          </a>
          <a href="https://twitter.com" aria-label="Twitter" target="_blank" rel="noopener">
            <i class="bi bi-twitter" style="font-size:1.3rem;"></i>
          </a>
          <a href="mailto:contacto@enebar.com" aria-label="Email">
            <i class="bi bi-envelope" style="font-size:1.3rem;"></i>
          </a>
        </div>
      </div>
    </footer>
  </main>

<script>
  // Datos de ejemplo (podés reemplazar por fetch a una API/JSON)
  const DATA = [
    {id:1, name:'Power Choco 20', flavor:'Chocolate', protein:20, price:1999, vegan:false, glutenFree:true, img:''},
    {id:2, name:'Vegan Crunch', flavor:'Almendra', protein:12, price:2199, vegan:true, glutenFree:true, img:''},
    {id:3, name:'Eco Nuts', flavor:'Maní y miel', protein:9, price:1399, vegan:false, glutenFree:false, img:''},
    {id:4, name:'Fiber Max 15', flavor:'Arándanos', protein:15, price:1799, vegan:false, glutenFree:true, img:''},
    {id:5, name:'Plant Power 22', flavor:'Cookies & Cream', protein:22, price:2499, vegan:true, glutenFree:true, img:''},
    {id:6, name:'Kids Honey 7', flavor:'Miel', protein:7, price:999, vegan:false, glutenFree:false, img:''},
    {id:7, name:'Sin TACC Plus', flavor:'Dátiles y nuez', protein:13, price:2099, vegan:true, glutenFree:true, img:''},
    {id:8, name:'Choco Fit 18', flavor:'Chocolate negro', protein:18, price:1899, vegan:false, glutenFree:true, img:''},
  ];

  // Helpers
  const $ = s => document.querySelector(s);
  const $$ = s => Array.from(document.querySelectorAll(s));
  const money = n => n.toLocaleString('es-AR', {style:'currency', currency:'ARS'});

  // Refs
  const q = $('#q'), sort = $('#sort'), protein = $('#protein'), min = $('#min'), max = $('#max');
  const vegan = $('#vegan'), gf = $('#gf'), clear = $('#clear'), chips = $('#active-chips');
  const catalog = $('#catalog'), count = $('#count'), empty = $('#empty');

  let state = {query:'', sort:'price-asc', protein:'', min:null, max:null, vegan:false, gf:false};

  // Eventos
  q.addEventListener('input', ()=>{state.query=q.value.toLowerCase(); render();});
  sort.addEventListener('change', ()=>{state.sort=sort.value; render();});
  protein.addEventListener('change', ()=>{state.protein=protein.value; render();});
  [min,max].forEach(inp=>inp.addEventListener('input', ()=>{state.min=+min.value||null; state.max=+max.value||null; render();}));
  vegan.addEventListener('change', ()=>{state.vegan=vegan.checked; render();});
  gf.addEventListener('change', ()=>{state.gf=gf.checked; render();});
  clear.addEventListener('click', ()=>{
    state={query:'', sort:'price-asc', protein:'', min:null, max:null, vegan:false, gf:false};
    q.value=''; sort.value='price-asc'; protein.value=''; min.value=''; max.value=''; vegan.checked=false; gf.checked=false;
    render();
  });

  function byProteinRange(p){
    if(!state.protein) return true;
    if(state.protein==='20+') return p>=20;
    if(state.protein==='10-19') return p>=10 && p<=19;
    if(state.protein==='<10') return p<10;
    return true;
  }

  function applyFilters(data){
    return data.filter(x=>{
      if(state.query && !(`${x.name} ${x.flavor}`.toLowerCase().includes(state.query))) return false;
      if(!byProteinRange(x.protein)) return false;
      if(state.vegan && !x.vegan) return false;
      if(state.gf && !x.glutenFree) return false;
      if(state.min!=null && x.price<state.min) return false;
      if(state.max!=null && x.price>state.max) return false;
      return true;
    }).sort((a,b)=>{
      switch(state.sort){
        case 'price-asc':  return a.price-b.price;
        case 'price-desc': return b.price-a.price;
        case 'protein-desc': return b.protein-a.protein;
        case 'protein-asc':  return a.protein-b.protein;
        default: return 0;
      }
    });
  }

  function renderChips(){
    const arr=[];
    if(state.query) arr.push(`Búsqueda: "${state.query}"`);
    if(state.protein) arr.push(`Proteína: ${state.protein}`);
    if(state.min!=null) arr.push(`Min: ${money(state.min)}`);
    if(state.max!=null) arr.push(`Max: ${money(state.max)}`);
    if(state.vegan) arr.push('Vegano');
    if(state.gf) arr.push('Sin TACC');
    chips.innerHTML = arr.map(t=>`<span class="chip">${t}</span>`).join('') || '<span class="chip">Sin filtros</span>';
  }

  function render(){
    const items = applyFilters(DATA);
    renderChips();
    count.textContent = `${items.length} producto${items.length!==1?'s':''}`;
    catalog.innerHTML = items.map(x=>`
      <article class="card">
        <img src="${x.img}" alt="Barrita ${x.name}">
        <div class="body">
          <p class="title">${x.name}</p>
          <p class="meta">${x.flavor} • ${x.protein}g proteína</p>
          <div class="tags">
            ${x.vegan?'<span class="tag">Vegano</span>':''}
            ${x.glutenFree?'<span class="tag">Sin TACC</span>':''}
          </div>
          <div class="price">${money(x.price)}</div>
          <button class="btn"><i class="bi bi-cart-plus"></i> Agregar</button>
        </div>
      </article>
    `).join('');
    empty.style.display = items.length ? 'none':'block';
  }

  render();
</script>
</body>
</html>
