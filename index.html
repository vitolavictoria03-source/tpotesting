<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Registro de Usuario</title>
   <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">
    <style>
    /* Sólo estilos del popup; el resto de estilos (btn, card, etc.) usá tu CSS */
    .overlay {
      position: fixed; inset: 0; display: none; /* oculto */
      justify-content: center; align-items: center;
      background: rgba(0,0,0,.6); z-index: 9999;
    }
    .popup {
      background: #fff; color: #111; width: min(90vw, 420px);
      border-radius: 12px; box-shadow: 0 10px 30px rgba(0,0,0,.3);
      padding: 20px; text-align: center;
    }
    .popup h2 { margin: 0 0 8px; font-size: 1.2rem; }
    .popup button {
      margin-top: 12px; padding: 8px 14px; border: none; border-radius: 8px;
      background: #2563eb; color: #fff; cursor: pointer;
    }
    .field { position: relative; }
    #togglePwd {
      position: absolute; right: 8px; top: 50%; transform: translateY(-50%);
      background: transparent; border: none; cursor: pointer;
      padding: 4px; color: #666;
    }
  </style>
</head>
<body class="center">
  <main class="card">
    <h1>Registro de Usuario</h1>
    <p>Completa los campos</p>

    <form id="form-registro" novalidate>
      <label for="nombre">Nombre:</label>
      <input id="nombre" required placeholder="Ej: Ana Pérez">

      <label for="email">Email: </label>
      <input id="email" type="email" required placeholder="ana@email.com">

      <div class="field">
        <label for="password">Contraseña</label>
        <input id="password" type="password" placeholder="Ingresá tu contraseña">
        <button type="button" id="togglePwd">
          <i class="bi bi-eye"></i>
        </button>
      </div>

     <div class="actions">
        <button class="btn" type="button" id="loginBtn">Iniciar sesión</button>
        <button class="btn primary" type="submit">Registrarme</button>
      </div>
      <div id="msg" class="msg" style="display:none"></div>
    </form>

      <div id="overlay" class="overlay" role="dialog" aria-modal="true" aria-labelledby="popupTitle">
        <div class="popup">
          <h2 id="popupTitle">✅ Registro exitoso</h2>
          <p>Tu cuenta se creó correctamente</p>
          <button id="closeBtn" href="productos.html">Siguiente</button>
        </div>
      </div>

    <div class="nav"><a href="productos.html">Listado de productos →</a></div>
  </main>

  <script>
    const $ = s => document.querySelector(s);
    const nombre = $('#nombre'), email = $('#email'), pass = $('#password'), msg = $('#msg');
    const form = $('#form-registro');
    const reEmail = /^[^\s@]+@[^\s@]+\.[^\s@]{2,}$/;
    const rePwd = /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d).{5,}$/;

    // Mostrar/ocultar contraseña con icono de Bootstrap
    const toggle = $('#togglePwd');
    const icon = toggle.querySelector('i');
    toggle.addEventListener('click', () => {
      const show = pass.type === 'password';
      pass.type = show ? 'text' : 'password';
      icon.classList.toggle('bi-eye', !show);
      icon.classList.toggle('bi-eye-slash', show);
    });

    // Validaciones rápidas
    function setState(input, ok){ input.classList.toggle('ok', ok); input.classList.toggle('err', !ok); return ok; }
    const vNombre = () => setState(nombre, nombre.value.trim().length >= 2);
    const vEmail  = () => setState(email,  reEmail.test(email.value.trim()));
    const vPwd    = () => setState(pass,   rePwd.test(pass.value.trim()));
    [nombre, email, pass].forEach(i => i.addEventListener('input', () => {
      if(i===nombre) vNombre(); if(i===email) vEmail(); if(i===pass) vPwd();
    }));

    // Popup refs
    const overlay = $('#overlay');
    const closeBtn = $('#closeBtn');

    // Submit → mostrar popup si todo OK
    form.addEventListener('submit', (e) => {
      e.preventDefault();
      const ok = [vNombre(), vEmail(), vPwd()].every(Boolean);
      if (!ok) {
        // si querés usar el msg clásico, quitá el style="display:none" de #msg
        msg.style.display = 'block';
        msg.className = 'msg err';
        msg.textContent = 'Hay campos con errores';
        return;
      }
      // Guardar usuario simulado
      localStorage.setItem('usuario', JSON.stringify({ nombre: nombre.value.trim(), email: email.value.trim() }));
      // Abrir popup
      overlay.style.display = 'flex';
    });

    // Cerrar popup
    closeBtn.addEventListener('click', () => overlay.style.display = 'none');
    overlay.addEventListener('click', (e) => { if (e.target === overlay) overlay.style.display = 'none'; });
  </script>
</body>
</html>